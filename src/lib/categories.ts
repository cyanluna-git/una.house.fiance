// 3-Level Category Hierarchy for Korean Personal Finance
// L1 (대분류) > L2 (중분류) > L3 (소분류)

export const CATEGORY_HIERARCHY: Record<string, Record<string, string[]>> = {
  "식비": {
    "외식": ["한식", "중식", "일식", "양식", "분식", "기타외식"],
    "배달": ["배달앱", "전화주문"],
    "식료품": ["마트", "편의점", "전통시장", "온라인식품"],
    "카페/음료": ["커피", "음료", "디저트"],
  },
  "교통": {
    "대중교통": ["버스", "지하철", "기차", "시외버스"],
    "자동차": ["주유", "하이패스", "주차", "정비"],
    "택시": [],
  },
  "쇼핑": {
    "온라인쇼핑": ["쿠팡", "네이버", "해외직구"],
    "오프라인": ["백화점", "대형마트"],
    "생활용품": ["다이소", "생활잡화"],
    "의류/패션": ["의류", "신발", "악세서리"],
  },
  "주거": {
    "월세/관리비": ["월세", "관리비"],
    "공과금": ["전기", "가스", "수도"],
    "인테리어/가전": ["가구", "가전"],
  },
  "통신": {
    "휴대폰": ["SKT", "KT", "LGU+"],
    "인터넷/TV": ["인터넷", "IPTV"],
    "구독서비스": ["유튜브", "넷플릭스", "음악스트리밍", "클라우드"],
  },
  "보험": {
    "생명보험": ["종신", "연금", "저축성"],
    "손해보험": ["자동차보험", "화재보험"],
    "건강보험": ["실손", "건강"],
  },
  "의료": {
    "진료": ["병원", "의원", "한의원"],
    "약국": [],
    "건강검진": [],
  },
  "교육": {
    "학원/강의": ["학원", "온라인강의"],
    "도서": ["서점", "전자책"],
  },
  "여가/문화": {
    "영화/공연": ["영화", "공연", "전시"],
    "여행": ["숙박", "항공", "관광"],
    "운동/스포츠": ["헬스", "골프", "수영"],
    "취미": ["게임", "음악"],
  },
  "금융": {
    "이자": ["대출이자", "카드이자"],
    "연회비": [],
    "세금": ["소득세", "재산세"],
    "수수료": ["송금수수료", "ATM수수료"],
  },
  "수입": {
    "급여": ["월급", "보너스", "수당"],
    "부수입": ["이자수입", "배당", "프리랜서"],
    "기타수입": ["환급", "보상"],
  },
  "대출": {
    "원금상환": ["주택대출", "신용대출", "학자금"],
    "이자상환": [],
  },
  "기부": {
    "정기후원": [],
    "일회성기부": [],
  },
  "기타": {
    "미분류": [],
    "기타지출": [],
  },
};

export function getL1Categories(): string[] {
  return Object.keys(CATEGORY_HIERARCHY);
}

export function getL2Categories(l1: string): string[] {
  return l1 && CATEGORY_HIERARCHY[l1] ? Object.keys(CATEGORY_HIERARCHY[l1]) : [];
}

export function getL3Categories(l1: string, l2: string): string[] {
  return l1 && l2 && CATEGORY_HIERARCHY[l1]?.[l2] ? CATEGORY_HIERARCHY[l1][l2] : [];
}

// Migration map: old flat category -> { l1, l2 }
export const MIGRATION_MAP: Record<string, { l1: string; l2: string }> = {
  "식비":   { l1: "식비", l2: "" },
  "교통":   { l1: "교통", l2: "" },
  "쇼핑":   { l1: "쇼핑", l2: "" },
  "보험":   { l1: "보험", l2: "" },
  "통신":   { l1: "통신", l2: "" },
  "의료":   { l1: "의료", l2: "" },
  "기부":   { l1: "기부", l2: "" },
  "급여":   { l1: "수입", l2: "급여" },
  "대출":   { l1: "대출", l2: "" },
  "기타":   { l1: "기타", l2: "기타지출" },
  "미분류": { l1: "기타", l2: "미분류" },
};
